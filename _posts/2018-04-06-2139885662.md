---
layout: post
title: 利用Python实现卷积神经网络的可视化
categories:
- Pocket
tags:
---
原文地址：http://mp.weixin.qq.com/s/LjO0h0VXReS1FgQNWFY9wA

收藏时间：2018-04-06 11:45:18

<div  lang="zh">
            
                        <div id="img-content" nodeIndex="5">
                
                
                <p class="profile_meta _RIL_KEEPER_CLASS_" nodeIndex="10">
                            <label class="profile_meta_label">微信号</label>
                            <span class="profile_meta_value">yunqiinsight</span>
                            </p><p class="profile_meta _RIL_KEEPER_CLASS_" nodeIndex="11">
                            <label class="profile_meta_label">功能介绍</label>
                            <span class="profile_meta_value">云栖社区是由阿里云负责运营、阿里巴巴技术协会和阿里巴巴集团各技术团队提供内容支持的开放式技术社区。</span>
                            </p>
                                
                
                
                
                                                
                                                                
                
                <div class="rich_media_content " id="js_content" nodeIndex="12">
                    

                    

                    
                    
                    <section nodeIndex="203"><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="199"><section class="" nodeIndex="204"><section class="" nodeIndex="14"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="13"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="205">云栖君导读</strong>：本文简单说明了CNN模型可视化的重要性，以及介绍了一些可视化CNN网络模型的方法，希望对读者有所帮助，使其能够在后续深度学习应用中构建更好的模型。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="206"><section class="" nodeIndex="207"><section class="" nodeIndex="16"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="15"><br nodeIndex="208"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="209"><section class="" nodeIndex="210"><section class="" nodeIndex="18"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="17">对于深度学习这种端到端模型来说，如何说明和理解其中的训练过程是大多数研究者关注热点之一，这个问题对于那种高风险行业显得尤为重视，比如医疗、军事等。在深度学习中，这个问题被称作“黑匣子（Black Box）”。如果不能解释模型的工作过程，我们怎么能够就轻易相信模型的输出结果呢？</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="19"><br nodeIndex="211"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="20">以深度学习模型检测癌症肿瘤为例，该模型告诉你它能够检测出癌症的准确率高达99%，但它并没有告诉你它是如何工作并给出判断结果的。那么该模型是在核磁共振扫描片子中发现了重要线索吗？或者仅仅是将扫描结果上的污点错误地认为是肿瘤呢？模型的输出结果关系到病人的生死问题及治疗方案，医生是不能承担起这种错误的。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="212"><section class="" nodeIndex="213"><section class="" nodeIndex="22"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="21"><br nodeIndex="214"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="215"><section class="" nodeIndex="216"><section class="" nodeIndex="217"><div id="RIL_IMG_1" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/1"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="218"><section class="" nodeIndex="219"><section class="" nodeIndex="24"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="23"><br nodeIndex="220"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="221"><section class="" nodeIndex="222"><section class="" nodeIndex="26"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="25">在本文中，将探讨如何可视化卷积神经网络（CNN），该网络在计算机视觉中使用最为广泛。首先了解CNN模型可视化的重要性，其次介绍可视化的几种方法，同时以一个用例帮助读者更好地理解模型可视化这一概念。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="27"><br nodeIndex="223"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="28"><span nodeIndex="224"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="225">一、卷积神经网络模型可视化的重要性</strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="29"><span nodeIndex="226"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="227"><br nodeIndex="228"></strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="30">正如上文中介绍的癌症肿瘤诊断案例所看到的，研究人员需要对所设计模型的工作原理及其功能掌握清楚，这点至关重要。一般而言，一名深度学习研究者应该记住以下几点：</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="31"><br nodeIndex="229"></p><ol class=" list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="33"><li nodeIndex="32"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="34"> 理解模型是如何工作的</p></li><li nodeIndex="35"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="36">调整模型的参数</p></li><li nodeIndex="37"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="38">找出模型失败的原因</p></li><li nodeIndex="39"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="40">向消费者/终端用户或业务主管解释模型做出的决定</p></li></ol><p class=" _RIL_KEEPER_CLASS_" nodeIndex="41"><br nodeIndex="230"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="42">现在让我们看一个例子，可视化一个神经网络模型有助于理解其工作原理和提升模型性能。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="43"><br nodeIndex="231"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="44">曾几何时，美国陆军希望使用神经网络自动检测伪装的敌方坦克。研究人员使用50张迷彩坦克照片及50张树林照片来训练一个神经网络。使用有监督学习方法来训练模型，当研究人员训练好网络的参数后，网络模型能够对训练集做出正确的判断——50张迷彩坦克全都输出“Yes”，50张树林照片全都输出“No”。但是这并不能保证模型对于新的样本也能正确分类。聪明的是，研究人员最初拍摄了200张照片，其中包含了100张迷彩坦克照片、100张树木照片。从中分别选取50张照片合计100张照片作为训练集，剩余的100张照片作为测试集。结果发现，模型对测试集也能正确分类。因此，研究人员觉得模型没有问题了，就将最终成果交付给军方。原以为军方会很满意这份研究成果，结果军方做出的反馈是他们进行测试后发现效果并不好。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="232"><section class="" nodeIndex="233"><section class="" nodeIndex="46"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="45"><br nodeIndex="234"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="235"><section class="" nodeIndex="236"><section class="" nodeIndex="237"><div id="RIL_IMG_2" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/2"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="238"><section class="" nodeIndex="239"><section class="" nodeIndex="48"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="47"><br nodeIndex="240"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="241"><section class="" nodeIndex="242"><section class="" nodeIndex="50"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="49">研究人员感觉此事有点蹊跷，为什么之前测试时百分百准确，而军方测试的时候又掉链子了呢？最后终于发现，原来是研究者的数据集出现了问题，采集迷彩坦克的时候是阴天，而采集树林的时候是晴天，神经网络最终学会的是区分晴天和阴天，而不是区分迷彩坦克和树林。这真是令人哭笑不得啊，那造成这个问题的主要原因还是没有弄清楚模型的具体的工作原理及其功能。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="51"><br nodeIndex="243"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="52"><span nodeIndex="244"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="245">二、可视化CNN模型的方法</strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="53"><span nodeIndex="246"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="247"><br nodeIndex="248"></strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="54">根据其内部的工作原理，大体上可以将CNN可视化方法分为以下三类：</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="55"><br nodeIndex="249"></p><ol class=" list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="57"><li nodeIndex="56"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="58">初步方法：一种显示训练模型整体结构的简单方法</p></li><li nodeIndex="59"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="60">基于激活的方法：对单个或一组神经元的激活状态进行破译以了解其工作过程</p></li><li nodeIndex="61"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="62">基于梯度的方法：在训练过程中操作前向传播和后向传播形成的梯度</p></li></ol><p class=" _RIL_KEEPER_CLASS_" nodeIndex="63"><br nodeIndex="250"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="64">下面将具体介绍以上三种方法，所举例子是使用Keras深度学习库实现，另外本文使用的数据集是由“识别数字”竞赛提供。因此，读者想复现文中案例时，请确保安装好Kears以及执行了这些步骤。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="65"><br nodeIndex="251"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="66"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="252">1、初步方法</strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="67"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="253"><br nodeIndex="254"></strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="68"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="255"><em nodeIndex="256">1.1 绘制模型结构图</em></strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="69"><em nodeIndex="257"><br nodeIndex="258"></em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="70">研究者能做的最简单的事情就是绘制出模型结构图，此外还可以标注神经网络中每层的形状及参数。在keras中，可以使用如下命令完成模型结构图的绘制：</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="259"><section class="" nodeIndex="260"><section class="" nodeIndex="72"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="71"><br nodeIndex="261"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="262"><section class="" nodeIndex="263"><section class="" nodeIndex="264"><div id="RIL_IMG_3" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/3"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="265"><section class="" nodeIndex="266"><section class="" nodeIndex="267"><div id="RIL_IMG_4" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/4"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="268"><section class="" nodeIndex="269"><section class="" nodeIndex="74"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="73"><br nodeIndex="270"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="271"><section class="" nodeIndex="272"><section class="" nodeIndex="76"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="75">还可以用一个更富有创造力和表现力的方式呈现模型结构框图，可以使用keras.utils.vis_utils函数完成模型体系结构图的绘制。<br nodeIndex="273"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="274"><section class="" nodeIndex="275"><section class="" nodeIndex="78"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="77"><br nodeIndex="276"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="277"><section class="" nodeIndex="278"><section class="" nodeIndex="279"><div id="RIL_IMG_5" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/5"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="280"><section class="" nodeIndex="281"><section class="" nodeIndex="80"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="79"><br nodeIndex="282"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="283"><section class="" nodeIndex="284"><section class="" nodeIndex="82"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="81"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="285"><em nodeIndex="286">1.2 可视化滤波器</em></strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="83"><em nodeIndex="287"><br nodeIndex="288"></em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="84">另一种方法是绘制训练模型的过滤器，这样就可以了解这些过滤器的表现形式。例如，第一层的第一个过滤器看起来像：</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="289"><section class="" nodeIndex="290"><section class="" nodeIndex="86"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="85"><br nodeIndex="291"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="292"><section class="" nodeIndex="293"><section class="" nodeIndex="294"><div id="RIL_IMG_6" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/6"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="295"><section class="" nodeIndex="296"><section class="" nodeIndex="297"><div id="RIL_IMG_7" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/7"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="298"><section class="" nodeIndex="299"><section class="" nodeIndex="88"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="87"><br nodeIndex="300"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="301"><section class="" nodeIndex="302"><section class="" nodeIndex="90"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="89">一般来说，神经网络的底层主要是作为边缘检测器，当层数变深时，过滤器能够捕捉更加抽象的概念，比如人脸等。<br nodeIndex="303"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="304"><section class="" nodeIndex="305"><section class="" nodeIndex="92"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="91"><br nodeIndex="306"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="307"><section class="" nodeIndex="308"><section class="" nodeIndex="309"><div id="RIL_IMG_8" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/8"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="310"><section class="" nodeIndex="311"><section class="" nodeIndex="94"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="93"><br nodeIndex="312"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="313"><section class="" nodeIndex="314"><section class="" nodeIndex="96"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="95"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="315">2、激活方法</strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="97"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="316"><br nodeIndex="317"></strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="98"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="318"><em nodeIndex="319">2.1 最大化激活</em></strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="99"><em nodeIndex="320"><br nodeIndex="321"></em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="100">为了理解神经网络的工作过程，可以在输入图像上应用过滤器，然后绘制其卷积后的输出，这使得我们能够理解一个过滤器其特定的激活模式是什么。比如，下图是一个人脸过滤器，当输入图像是人脸图像时候，它就会被激活。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="322"><section class="" nodeIndex="323"><section class="" nodeIndex="102"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="101"><br nodeIndex="324"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="325"><section class="" nodeIndex="326"><section class="" nodeIndex="327"><div id="RIL_IMG_9" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/9"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="328"><section class="" nodeIndex="329"><section class="" nodeIndex="330"><div id="RIL_IMG_10" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/10"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="331"><section class="" nodeIndex="332"><section class="" nodeIndex="104"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="103"><br nodeIndex="333"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="200"><section class="" nodeIndex="334"><section class="" nodeIndex="106"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="105">同理，可以将这个想法应用于所有的类别，并检查它们的模式会是什么样子。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="335"><section class="" nodeIndex="336"><section class="" nodeIndex="108"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="107"><br nodeIndex="337"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="338"><section class="" nodeIndex="339"><section class="" nodeIndex="340"><div id="RIL_IMG_11" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/11"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="341"><section class="" nodeIndex="342"><section class="" nodeIndex="110"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="109"><br nodeIndex="343"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="344"><section class="" nodeIndex="345"><section class="" nodeIndex="112"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="111"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="346"><em nodeIndex="347">2.2 图像遮挡</em></strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="113"><em nodeIndex="348"><br nodeIndex="349"></em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="114">在图像分类问题中，可能会遇到目标物体被遮挡，有时候只有物体的一小部分可见的情况。基于图像遮挡的方法是通过一个灰色正方形系统地输入图像的不同部分并监视分类器的输出。这些例子清楚地表明模型在场景中定位对象时，若对象被遮挡，其分类正确的概率显著降低。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="350"><section class="" nodeIndex="351"><section class="" nodeIndex="116"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="115"><br nodeIndex="352"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="353"><section class="" nodeIndex="354"><section class="" nodeIndex="355"><div id="RIL_IMG_12" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/12"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="356"><section class="" nodeIndex="357"><section class="" nodeIndex="118"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="117"><br nodeIndex="358"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="201"><section class="" nodeIndex="359"><section class="" nodeIndex="120"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="119">为了理解这一概念，可以从数据集中随机抽取图像，并尝试绘制该图的热图（heatmap）。这使得我们直观地了解图像的哪些部分对于该模型而言的重要性，以便对实际类别进行明确的区分。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="360"><section class="" nodeIndex="361"><section class="" nodeIndex="122"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="121"><br nodeIndex="362"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="363"><section class="" nodeIndex="364"><section class="" nodeIndex="365"><div id="RIL_IMG_13" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/13"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="366"><section class="" nodeIndex="367"><section class="" nodeIndex="368"><div id="RIL_IMG_14" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/14"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="369"><section class="" nodeIndex="370"><section class="" nodeIndex="371"><div id="RIL_IMG_15" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/15"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="372"><section class="" nodeIndex="373"><section class="" nodeIndex="124"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="123"><br nodeIndex="374"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="375"><section class="" nodeIndex="376"><section class="" nodeIndex="377"><div id="RIL_IMG_16" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/16"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="378"><section class="" nodeIndex="379"><section class="" nodeIndex="126"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="125"><br nodeIndex="380"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="381"><section class="" nodeIndex="382"><section class="" nodeIndex="128"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="127"><span nodeIndex="383"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="384">3、基于梯度的方法</strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="129"><span nodeIndex="385"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="386"><br nodeIndex="387"></strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="130"><em nodeIndex="388"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="389">3.1 显著图</strong></em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="131"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="390"><br nodeIndex="391"></strong></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="132">正如之前的坦克案例中看到的那样，怎么才能知道模型侧重于哪部分的预测呢？为此，可以使用显著图解决这个问题。显著图首先在这篇文章中被介绍。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="133"><br nodeIndex="392"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="134">使用显著图的概念相当直接——计算输出类别相对于输入图像的梯度。这应该告诉我们输出类别值对于输入图像像素中的微小变化是怎样变化的。梯度中的所有正值告诉我们，像素的一个小变化会增加输出值。因此，将这些梯度可视化可以提供一些直观的信息，这种方法突出了对输出贡献最大的显著图像区域。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="393"><section class="" nodeIndex="394"><section class="" nodeIndex="136"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="135"><br nodeIndex="395"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="396"><section class="" nodeIndex="397"><section class="" nodeIndex="398"><div id="RIL_IMG_17" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/17"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="399"><section class="" nodeIndex="400"><section class="" nodeIndex="401"><div id="RIL_IMG_18" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/18"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="402"><section class="" nodeIndex="403"><section class="" nodeIndex="404"><div id="RIL_IMG_19" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/19"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="405"><section class="" nodeIndex="406"><section class="" nodeIndex="138"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="137"><br nodeIndex="407"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="408"><section class="" nodeIndex="409"><section class="" nodeIndex="410"><div id="RIL_IMG_20" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/20"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="411"><section class="" nodeIndex="412"><section class="" nodeIndex="140"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="139"><br nodeIndex="413"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="414"><section class="" nodeIndex="415"><section class="" nodeIndex="142"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="141"><em nodeIndex="416"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="417">3.2 基于梯度的类别激活映射</strong></em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="143"><em nodeIndex="418"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="419"><br nodeIndex="420"></strong></em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="144">类别激活映射（CAM）或grad-CAM是另外一种可视化模型的方法，这种方法使用的不是梯度的输出值，而是使用倒数第二个卷积层的输出，这样做是为了利用存储在倒数第二层的空间信息。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="421"><section class="" nodeIndex="422"><section class="" nodeIndex="146"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="145"><br nodeIndex="423"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="424"><section class="" nodeIndex="425"><section class="" nodeIndex="426"><div id="RIL_IMG_21" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/21"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="427"><section class="" nodeIndex="428"><section class="" nodeIndex="429"><div id="RIL_IMG_22" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/22"/></div></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="430"><section class="" nodeIndex="431"><section class="" nodeIndex="148"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="147"><br nodeIndex="432"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="202"><section class="" nodeIndex="433"><section class="" nodeIndex="150"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="149"><span nodeIndex="434"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="435">总结</strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="151"><span nodeIndex="436"><strong class=" _RIL_KEEPER_CLASS_" nodeIndex="437"><br nodeIndex="438"></strong></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="152">本文简单说明了CNN模型可视化的重要性，以及介绍了一些可视化CNN网络模型的方法，希望对读者有所帮助，使其能够在后续深度学习应用中构建更好的模型。</p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="439"><section class="" nodeIndex="440"><section class="" nodeIndex="154"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="153"><br nodeIndex="441"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="442"><section class="" nodeIndex="443"><section class="" nodeIndex="156"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="155">本文由阿里云云栖社区组织翻译</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="157"><br nodeIndex="444"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="158">文章原标题《Essentials of Deep Learning: Visualizing Convolutional Neural Networks in Python》</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="159"><br nodeIndex="445"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="160">作者：Faizan Shaikh，译者：海棠，审阅：袁虎。<br nodeIndex="446"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="447"><section class="" nodeIndex="448"><section class="" nodeIndex="162"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="161"><br nodeIndex="449"></p></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="450"><section class="" nodeIndex="451"><section class="" nodeIndex="452"><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="453"><section class="" nodeIndex="454"><section class="" nodeIndex="455"></section></section></section></section><section class="" nodeIndex="456"><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="457"><section class="" nodeIndex="458"><section class="" nodeIndex="164"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="163">end</p></section></section></section></section><section class="" nodeIndex="459"><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="460"><section class="" nodeIndex="461"><section class="" nodeIndex="462"></section></section></section></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="463"><section class="" nodeIndex="464"><section class="" nodeIndex="465"><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="466"><section class="" nodeIndex="467"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="165" childisonlyalink="1"><a href="http://mp.weixin.qq.com/s?__biz=MzI0NTE4NjA0OQ==&mid=2658357237&idx=1&sn=b35fef7c3bd397a2da22a11a9273ec72&chksm=f2d5849bc5a20d8d6fafd4bd2959d00ea7336207598bbbbd1ca28b46a5550cc3974d562df875&scene=21#wechat_redirect" target="_blank">在阿里，我们如何管理代码分支？</a><br></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="167" childisonlyalink="1"><a href="http://mp.weixin.qq.com/s?__biz=MzI0NTE4NjA0OQ==&mid=2658357223&idx=1&sn=63552886f01bafa210faa286c2053df1&chksm=f2d58489c5a20d9fdd89b0dc47a8c09878482ea1570a9750bb2a113b5ad6b67d3a2b42c958a1&scene=21#wechat_redirect" target="_blank">关于8K，阿里云最近做了啥？</a><br></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="168" childisonlyalink="1"><a href="http://mp.weixin.qq.com/s?__biz=MzI0NTE4NjA0OQ==&mid=2658357230&idx=1&sn=46a15f606a334786f8d1af660be93867&chksm=f2d58480c5a20d96db6670c3e6d53f09ac1493f89328cd92aceb905bd813af1921be80ac1b9b&scene=21#wechat_redirect" target="_blank">K-Means算法的10个有趣用例</a><br></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="169" childisonlyalink="1"><a href="http://mp.weixin.qq.com/s?__biz=MzI0NTE4NjA0OQ==&mid=2658357224&idx=1&sn=613b90b4ef075526bd574944939f8593&chksm=f2d58486c5a20d90d0cbd94fb1e9962dcf229d740c00c17921151533424cc15ff054704053de&scene=21#wechat_redirect" target="_blank">SpringBoot开发案例之整合Spring-data-jpa进阶篇</a><br></p></section></section></section><section class="" nodeIndex="468"><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="469"><section class="" nodeIndex="470"><section class="" nodeIndex="471"><section nodeIndex="472"></section><section class="" nodeIndex="171"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="170">更多精彩</p></section></section></section></section></section></section></section><section class="Powered-by-XIUMI V5" powered-by="xiumi.us" nodeIndex="473"><section class="" nodeIndex="474"><section class="" nodeIndex="173"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="172"><br nodeIndex="475"></p></section></section></section></section><p class=" _RIL_KEEPER_CLASS_" nodeIndex="174"><div id="RIL_IMG_23" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/23"/></div></p>
                </div>
                <div class="ct_mpda_wrp" id="js_sponsor_ad_area" nodeIndex="175"></div>

                
                                <p id="js_preview_reward_wording" class="tips_global reward_tips _RIL_KEEPER_CLASS_" nodeIndex="177"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="178">
                        <a class="reward_access" id="js_preview_reward_link" href=""><span class="icon-reward"></span>赞赏</a>

                    </p>
                <p class="tips_global _RIL_KEEPER_CLASS_" nodeIndex="180">长按二维码向我转账</p><p id="js_preview_reward_ios_wording" class="reward_tips _RIL_KEEPER_CLASS_" nodeIndex="181"></p><p class="tips_global _RIL_KEEPER_CLASS_" nodeIndex="182">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p><div id="RIL_IMG_24" class="RIL_IMG"><img src="/media/posts_images/2018-04-06-2139885662/24"/></div>
                            </div>
                        
                        


                    </div>