---
layout: post
title: 怎样用 Tar 和 OpenSSL 给文件和目录加密及解密
categories:
- Pocket
tags:
---
原文地址：http://mp.weixin.qq.com/s?__biz=MjM5NjQ4MjYwMQ==&mid=2664608467&idx=2&sn=d1526269baaf45f91658a0ee693f733d&chksm=bdce89958ab90083ab330fe0cd6d7449b4d7dc79d5efeb0d28ef3f769f8137262530ff543a77&scene=0#wechat_redirect

收藏时间：2016-11-11 10:45:44

<div  >
            
                        <div id="img-content" nodeIndex="5">
                
                
                <p class="profile_meta _RIL_KEEPER_CLASS_" nodeIndex="10">
                            <label class="profile_meta_label">微信号</label>
                            <span class="profile_meta_value">linux-cn</span>
                            </p><p class="profile_meta _RIL_KEEPER_CLASS_" nodeIndex="11">
                            <label class="profile_meta_label">功能介绍</label>
                            <span class="profile_meta_value">十万级技术订阅号，依托于『Linux中国』（https://linux.cn/）社区，专注于 Linux 学习、技术研究、开源思想传播。</span>
                            </p>
                                
                
                
                
                                                
                                                                
                
                <div class="rich_media_content " id="js_content" nodeIndex="12">
                    

                    

                    
                    
                    <div id="RIL_IMG_1" class="RIL_IMG"><img src="/media/posts_images/2016-11-11-1476897304/1"/></div><p class=" _RIL_KEEPER_CLASS_" nodeIndex="13"></p><nav class="bm" nodeIndex="111"><section class="bm_h cl" nodeIndex="112">本文导航</section><nav class="bm_c inner_menu" nodeIndex="113"><ul class="xl cl list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="15"><li nodeIndex="14"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="16"><span class="folder">-</span><span>在 Linux 中加密文件</span><span class="y">24%</span></p></li><li nodeIndex="17"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="18"><span class="folder">-</span><span>在 Linux 中解密文件</span><span class="y">45%</span></p></li></ul></nav></nav><p class=" _RIL_KEEPER_CLASS_" nodeIndex="19"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="20">当你有重要的敏感数据的时候，给你的文件和目录额外加一层保护是至关重要的，特别是当你需要通过网络与他人传输数据的时候。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="21">由于这个原因，我在寻找一个可疑在 Linux 上加密及解密文件和目录的实用程序，幸运的是我找到了一个用 tar（Linux 的一个压缩打包工具）和 OpenSSL 来解决的方案。借助这两个工具，你真的可以毫不费力地创建和加密 tar 归档文件。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="22"><br nodeIndex="114"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="23">在这篇文章中，我们将了解如何使用 OpenSSL 创建和加密 tar 或 gz（gzip，另一种压缩文件）归档文件：</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="24">牢记使用 OpenSSL 的常规方式是：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="25"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="27"><li nodeIndex="26"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="28"><code><span class="com">#</span><span class="pln"> openssl command command</span><span class="pun">-</span><span class="pln">options arguments</span></code></p></li></ol></pre><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="29">在 Linux 中加密文件</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="30">要加密当前工作目录的内容（根据文件的大小，这可能需要一点时间）：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="31"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="33"><li nodeIndex="32"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="34"><code><span class="com">#</span><span class="pln"> </span><span class="kwd">tar</span><span class="pln"> </span><span class="pun">-</span><span class="pln">czf </span><span class="pun">-</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> openssl enc </span><span class="pun">-</span><span class="pun">-</span><span class="pln">eaes256</span><span class="pun">-</span><span class="pln">out secured</span><span class="pun">.</span><span class="kwd">tar</span><span class="pun">.</span><span class="pln">gz</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="35">上述命令的解释：</p><ol class=" list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="37"><li nodeIndex="36"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="38"><code>enc</code> - openssl 命令使用加密进行编码</p></li><li nodeIndex="39"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="40"><code>-e</code> – 用来加密输入文件的 <code>enc</code> 命令选项，这里是指前一个 tar 命令的输出</p></li><li nodeIndex="41"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="42"><code>-aes256</code> – 加密用的算法</p></li><li nodeIndex="43"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="44"><code>-out</code> – 用于指定输出文件名的 <code>enc</code> 命令选项，这里文件名是 <code>secured.tar.gz</code></p></li></ol><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="45">在 Linux 中解密文件</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="46">要解密上述 tar 归档内容，使用以下命令。</p><pre class="prettyprint linenums prettyprinted" nodeIndex="47"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="49"><li nodeIndex="48"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="50"><code><span class="com">#</span><span class="pln"> openssl enc </span><span class="pun">-</span><span class="pun">-</span><span class="pln">daes256</span><span class="pun">-</span><span class="kwd">in</span><span class="pln"> secured</span><span class="pun">.</span><span class="kwd">tar</span><span class="pun">.</span><span class="pln">gz </span><span class="pun">|</span><span class="pln"> </span><span class="kwd">tar</span><span class="pln"> xz </span><span class="pun">-</span><span class="kwd">Ctest</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="51">上述命令的解释：</p><ol class=" list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="53"><li nodeIndex="52"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="54"><code>-d</code> – 用于解密文件</p></li><li nodeIndex="55"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="56"><code>-C</code> – 提取内容到 <code>test</code> 子目录</p></li></ol><p class=" _RIL_KEEPER_CLASS_" nodeIndex="57">下图展示了加解密过程，以及当你尝试执行以下操作时会发生什么：</p><ol class=" list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="59"><li nodeIndex="58"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="60">以传统方式提取 tar 包的内容</p></li><li nodeIndex="61"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="62">使用了错误的密码的时候</p></li><li nodeIndex="63"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="64">当你输入正确的密码的时候</p></li></ol><p class=" _RIL_KEEPER_CLASS_" nodeIndex="65"><a class="ext" rel="external nofollow" target="_blank" nodeIndex="115"><div id="RIL_IMG_2" class="RIL_IMG"><img src="/media/posts_images/2016-11-11-1476897304/2"/></div></a></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="66"><span nodeIndex="116">在 Linux 中加密和解密 Tar 归档文件</span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="67">当你在本地网络或因特网工作的时候，你可以随时通过加密来保护你和他人共享的重要文本或文件，这有助于降低将其暴露给恶意攻击者的风险。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="68">我们研究了一种使用 OpenSSL（一个 openssl 命令行工具）加密 tar 包的简单技术，你可以参考它的<ruby nodeIndex="117">手册页<rt nodeIndex="118">man page</rt></ruby>来获取更多信息和有用的命令。</p><hr nodeIndex="119"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="69">via: <a class="ext" rel="external nofollow" target="_blank" nodeIndex="120">http://www.tecmint.com/encrypt-decrypt-files-tar-openssl-linux/</a></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="70">作者：<span nodeIndex="121"><a class="ext" rel="external nofollow" target="_blank" nodeIndex="122">Gabriel Cánepa</a></span><span class="sup" nodeIndex="123">[1]</span> 译者：<span nodeIndex="124"><a class="ext" rel="external nofollow" target="_blank" nodeIndex="125">OneNewLife</a></span> 校对：<span nodeIndex="126"><a class="ext" rel="external nofollow" target="_blank" nodeIndex="127">wxy</a></span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="71">本文由 <span nodeIndex="128"><a class="ext" rel="external nofollow" target="_blank" nodeIndex="129">LCTT</a></span><span class="sup" nodeIndex="130">[2]</span> 原创编译，<span nodeIndex="131"><a nodeIndex="132">Linux中国</a></span> 荣誉推出</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="72"><br nodeIndex="133"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="73"></p><section class="bm" nodeIndex="134"><section class="cap" nodeIndex="75"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="74">推荐文章</p></section><section class="bm_h cl" nodeIndex="77"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="76">滑动查看更多</p></section><section class="inner_menu" nodeIndex="135"><div id="RIL_IMG_3" class="RIL_IMG"><img src="/media/posts_images/2016-11-11-1476897304/3"/></div><div id="RIL_IMG_4" class="RIL_IMG"><img src="/media/posts_images/2016-11-11-1476897304/4"/></div><div id="RIL_IMG_5" class="RIL_IMG"><img src="/media/posts_images/2016-11-11-1476897304/5"/></div><div id="RIL_IMG_6" class="RIL_IMG"><img src="/media/posts_images/2016-11-11-1476897304/6"/></div></section><section class="bm_h cl" nodeIndex="79"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="78">输入文章 ID 或长按二维码直达</p></section></section><p class=" _RIL_KEEPER_CLASS_" nodeIndex="80"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="81"><br nodeIndex="136"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="82"><cite class="show_links" rilp="1" nodeIndex="137">[1]: http://www.tecmint.com/author/gacanepa/<br nodeIndex="138">[2]: https://github.com/LCTT/TranslateProject</cite></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="83"><br nodeIndex="139"></p></div><p class=" _RIL_KEEPER_CLASS_" nodeIndex="88">
                        
                        <a class="reward_access" id="js_reward_link" href=""><span class="icon-reward"></span><span id="js_reward_link_text">赞赏</span></a>
                        
                    </p><p class="tips_global reward_user_tips _RIL_KEEPER_CLASS_" id="js_reward_total_parent" nodeIndex="90"><a href="" id="js_reward_total"></a>人赞赏</p></div></div>