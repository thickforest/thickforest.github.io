---
layout: post
title: LZ77 压缩算法编码原理详解(结合图片和简单代码)
categories:
- Pocket
tags:
---
原文地址：http://blog.jobbole.com/106146/

收藏时间：2018-03-23 06:36:13

<div  lang="en">



<p nodeIndex="102">LZ77算法是无损压缩算法，由以色列人Abraham Lempel发表于1977年。LZ77是典型的基于字典的压缩算法，现在很多压缩技术都是基于LZ77。鉴于其在数据压缩领域的地位，本文将结合图片和源码详细介绍其原理。</p>
<p nodeIndex="103"><strong nodeIndex="619">原理介绍：</strong></p>
<p nodeIndex="104">首先介绍几个专业术语。</p>
<p nodeIndex="105">1.lookahead buffer(不知道怎么用中文表述，暂时称为待编码区):</p>
<p nodeIndex="106">等待编码的区域</p>
<p nodeIndex="107">2. search buffer：</p>
<p nodeIndex="108">已经编码的区域，搜索缓冲区</p>
<p nodeIndex="109">3.滑动窗口：</p>
<p nodeIndex="110">指定大小的窗，包含“搜索缓冲区”（左） + “待编码区”（右）</p>
<p nodeIndex="111">接下来，介绍具体的编码过程：</p>
<p nodeIndex="112">为了编码待编码区， 编码器在滑动窗口的搜索缓冲区查找直到找到匹配的字符串。匹配字符串的开始字符串与待编码缓冲区的距离称为“偏移值”，匹配字符串的长度称为“匹配长度”。编码器在编码时，会一直在搜索区中搜索，直到找到最大匹配字符串，并输出(o, l )，其中o是偏移值， l是匹配长度。然后窗口滑动l，继续开始编码。如果没有找到匹配字符串，则输出(0, 0, c)，c为待编码区下一个等待编码的字符，窗口滑动“1”。算法实现将类似下面的：</p>

<p nodeIndex="152">主要步骤为：</p>
<p nodeIndex="153">1.设置编码位置为输入流的开始</p>
<p nodeIndex="154">2.在滑窗的待编码区查找搜索区中的最大匹配字符串</p>
<p nodeIndex="155">3.如果找到字符串，输出(偏移值， 匹配长度)， 窗口向前滑动“匹配长度”</p>
<p nodeIndex="156">4.如果没有找到，输出(0, 0, 待编码区的第一个字符)，窗口向前滑动一个单位</p>
<p nodeIndex="157">5.如果待编码区不为空，回到步骤2</p>
<p nodeIndex="158">描述实在是太复杂，还是结合实例来讲解吧</p>
<p nodeIndex="159"><strong nodeIndex="620">实例：</strong></p>
<p nodeIndex="160">现在有字符串“AABCBBABC”，现在对其进行编码。</p>
<p nodeIndex="161">一开始，窗口滑入如图位置</p>
<div id="RIL_IMG_1" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/1"/></div>
<p nodeIndex="163">由图可见，待编码缓冲区有“AAB”三个字符，此时搜索缓冲区还是空的。所以编码第一个字符，由于搜索区为空，故找不到匹配串，输出(0,0, A),窗口右移一个单位，如下图</p>
<div id="RIL_IMG_2" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/2"/></div>
<p nodeIndex="165">此时待编码区有“ABC”。开始编码。最先编码”A”，在搜索区找到”A”。由于没有超过待编码区，故开始编码”AB”，但在搜索区没有找到匹配字符串，故无法编码。因此只能编码”A”。</p>
<p nodeIndex="166">输出(1, 1)。即为相对于待编码区，偏移一个单位，匹配长度为1。窗口右滑动匹配长度，即移动1个单位。如下图</p>
<div id="RIL_IMG_3" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/3"/></div>
<p nodeIndex="168">一样，没找到，输出(0, 0, B),右移1个单号，如下图</p>
<div id="RIL_IMG_4" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/4"/></div>
<p nodeIndex="170">输出（0， 0， C）,右移1个单位，如下图</p>
<div id="RIL_IMG_5" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/5"/></div>
<p nodeIndex="172">输出(2, 1),右移1个单位，如下图</p>
<div id="RIL_IMG_6" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/6"/></div>
<p nodeIndex="174">输出(3, 1)， 右移1个单位，如下图</p>
<div id="RIL_IMG_7" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/7"/></div>
<p nodeIndex="176">开始编码”A”，在搜索缓冲区查找到匹配字符串。由于待编码缓冲区没有超过，继续编码。开始编码”AB”,也搜索到。不要停止，继续编码“ABC”，找到匹配字符串。由于继续编码，则超过了窗口，故只编码“ABC”，输出(5, 3),偏移5，长度3。右移3个单位，如下图</p>
<div id="RIL_IMG_8" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/8"/></div>
<p nodeIndex="178">此时待编码缓冲区为空，停止编码。</p>
<p nodeIndex="179">最终输出结果如下</p>
<div id="RIL_IMG_9" class="RIL_IMG"><img src="/media/posts_images/2018-03-23-1427570065/9"/></div>
<p nodeIndex="181"><strong nodeIndex="630">python代码实现：</strong></p>
<div nodeIndex="182">
<div id="crayon-58b04543bd3f1238265784" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" nodeIndex="183">
<div class="crayon-toolbar" data-settings=" show" nodeIndex="184">

</div>
<div class="crayon-info" nodeIndex="198"></div>
<div class="crayon-plain-wrap" nodeIndex="199">
</div>
<div class="crayon-main" nodeIndex="200">
<table class="crayon-table ril_layoutTable" nodeIndex="615"><tr class="crayon-row" nodeIndex="202"><td class="crayon-nums" data-settings="show" nodeIndex="201">
<div class="crayon-nums-content" nodeIndex="203">
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-1" nodeIndex="204">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-2" nodeIndex="205">2</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-3" nodeIndex="206">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-4" nodeIndex="207">4</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-5" nodeIndex="208">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-6" nodeIndex="209">6</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-7" nodeIndex="210">7</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-8" nodeIndex="211">8</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-9" nodeIndex="212">9</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-10" nodeIndex="213">10</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-11" nodeIndex="214">11</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-12" nodeIndex="215">12</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-13" nodeIndex="216">13</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-14" nodeIndex="217">14</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-15" nodeIndex="218">15</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-16" nodeIndex="219">16</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-17" nodeIndex="220">17</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-18" nodeIndex="221">18</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-19" nodeIndex="222">19</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-20" nodeIndex="223">20</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-21" nodeIndex="224">21</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-22" nodeIndex="225">22</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-23" nodeIndex="226">23</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-24" nodeIndex="227">24</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-25" nodeIndex="228">25</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-26" nodeIndex="229">26</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-27" nodeIndex="230">27</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-28" nodeIndex="231">28</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-29" nodeIndex="232">29</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-30" nodeIndex="233">30</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-31" nodeIndex="234">31</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-32" nodeIndex="235">32</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-33" nodeIndex="236">33</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-34" nodeIndex="237">34</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-35" nodeIndex="238">35</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-36" nodeIndex="239">36</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-37" nodeIndex="240">37</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-38" nodeIndex="241">38</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-39" nodeIndex="242">39</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-40" nodeIndex="243">40</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-41" nodeIndex="244">41</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-42" nodeIndex="245">42</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-43" nodeIndex="246">43</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-44" nodeIndex="247">44</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-45" nodeIndex="248">45</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-46" nodeIndex="249">46</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-47" nodeIndex="250">47</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-48" nodeIndex="251">48</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-49" nodeIndex="252">49</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-50" nodeIndex="253">50</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-51" nodeIndex="254">51</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-52" nodeIndex="255">52</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-53" nodeIndex="256">53</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-54" nodeIndex="257">54</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-55" nodeIndex="258">55</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-56" nodeIndex="259">56</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-57" nodeIndex="260">57</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-58" nodeIndex="261">58</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-59" nodeIndex="262">59</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-60" nodeIndex="263">60</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-61" nodeIndex="264">61</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-62" nodeIndex="265">62</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-63" nodeIndex="266">63</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-64" nodeIndex="267">64</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-65" nodeIndex="268">65</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-66" nodeIndex="269">66</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-67" nodeIndex="270">67</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-68" nodeIndex="271">68</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-69" nodeIndex="272">69</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-70" nodeIndex="273">70</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-71" nodeIndex="274">71</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-72" nodeIndex="275">72</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-73" nodeIndex="276">73</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-74" nodeIndex="277">74</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-75" nodeIndex="278">75</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-76" nodeIndex="279">76</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-77" nodeIndex="280">77</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-78" nodeIndex="281">78</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-79" nodeIndex="282">79</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-80" nodeIndex="283">80</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-81" nodeIndex="284">81</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-82" nodeIndex="285">82</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-83" nodeIndex="286">83</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-84" nodeIndex="287">84</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-85" nodeIndex="288">85</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-86" nodeIndex="289">86</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-87" nodeIndex="290">87</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-88" nodeIndex="291">88</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-89" nodeIndex="292">89</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-90" nodeIndex="293">90</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-91" nodeIndex="294">91</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-92" nodeIndex="295">92</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-93" nodeIndex="296">93</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-94" nodeIndex="297">94</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-95" nodeIndex="298">95</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-96" nodeIndex="299">96</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-97" nodeIndex="300">97</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-98" nodeIndex="301">98</div>
<div class="crayon-num" data-line="crayon-58b04543bd3f1238265784-99" nodeIndex="302">99</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-58b04543bd3f1238265784-100" nodeIndex="303">100</div>
</div>
</td>
<td class="crayon-code" nodeIndex="304">
<div class="crayon-pre" nodeIndex="305">
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-1" nodeIndex="306"><span class="crayon-t" nodeIndex="632">class</span> <span class="crayon-v" nodeIndex="633">Lz77</span><span class="crayon-o" nodeIndex="634">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-2" nodeIndex="307"><span class="crayon-r" nodeIndex="635">def</span> <span class="crayon-e" nodeIndex="636">__init__</span><span class="crayon-sy" nodeIndex="637">(</span><span class="crayon-r" nodeIndex="638">self</span><span class="crayon-sy" nodeIndex="639">,</span> <span class="crayon-v" nodeIndex="640">inputStr</span><span class="crayon-sy" nodeIndex="641">)</span><span class="crayon-o" nodeIndex="642">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-3" nodeIndex="308"><span class="crayon-r" nodeIndex="643">self</span><span class="crayon-sy" nodeIndex="644">.</span><span class="crayon-v" nodeIndex="645">inputStr</span> <span class="crayon-o" nodeIndex="646">=</span> <span class="crayon-v" nodeIndex="647">inputStr</span> <span class="crayon-c" nodeIndex="648">#输入流</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-4" nodeIndex="309"><span class="crayon-r" nodeIndex="649">self</span><span class="crayon-sy" nodeIndex="650">.</span><span class="crayon-v" nodeIndex="651">searchSize</span> <span class="crayon-o" nodeIndex="652">=</span> <span class="crayon-cn" nodeIndex="653">5</span> <span class="crayon-c" nodeIndex="654">#搜索缓冲区(已编码区)大小</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-5" nodeIndex="310"><span class="crayon-r" nodeIndex="655">self</span><span class="crayon-sy" nodeIndex="656">.</span><span class="crayon-v" nodeIndex="657">aheadSize</span> <span class="crayon-o" nodeIndex="658">=</span> <span class="crayon-cn" nodeIndex="659">3</span> <span class="crayon-c" nodeIndex="660">#lookAhead缓冲区（待编码区）大小</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-6" nodeIndex="311"><span class="crayon-r" nodeIndex="661">self</span><span class="crayon-sy" nodeIndex="662">.</span><span class="crayon-v" nodeIndex="663">windSpiltIndex</span> <span class="crayon-o" nodeIndex="664">=</span> <span class="crayon-cn" nodeIndex="665">0</span> <span class="crayon-c" nodeIndex="666">#lookHead缓冲区开始的索引</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-7" nodeIndex="312"><span class="crayon-r" nodeIndex="667">self</span><span class="crayon-sy" nodeIndex="668">.</span><span class="crayon-v" nodeIndex="669">move</span> <span class="crayon-o" nodeIndex="670">=</span> <span class="crayon-cn" nodeIndex="671">0</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-8" nodeIndex="313"><span class="crayon-r" nodeIndex="672">self</span><span class="crayon-sy" nodeIndex="673">.</span><span class="crayon-v" nodeIndex="674">notFind</span> <span class="crayon-o" nodeIndex="675">=</span> <span class="crayon-o" nodeIndex="676">-</span><span class="crayon-cn" nodeIndex="677">1</span> <span class="crayon-c" nodeIndex="678">#没有找到匹配字符串</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-9" nodeIndex="314"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-10" nodeIndex="315"><span class="crayon-c" nodeIndex="679">#得到滑动窗口的末端索引</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-11" nodeIndex="316"><span class="crayon-r" nodeIndex="680">def</span> <span class="crayon-e" nodeIndex="681">getWinEndIndex</span><span class="crayon-sy" nodeIndex="682">(</span><span class="crayon-r" nodeIndex="683">self</span><span class="crayon-sy" nodeIndex="684">)</span><span class="crayon-o" nodeIndex="685">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-12" nodeIndex="317"><span class="crayon-st" nodeIndex="686">return</span> <span class="crayon-r" nodeIndex="687">self</span><span class="crayon-sy" nodeIndex="688">.</span><span class="crayon-v" nodeIndex="689">windSpiltIndex</span> <span class="crayon-o" nodeIndex="690">+</span> <span class="crayon-r" nodeIndex="691">self</span><span class="crayon-sy" nodeIndex="692">.</span><span class="crayon-v" nodeIndex="693">aheadSize</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-13" nodeIndex="318"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-14" nodeIndex="319"><span class="crayon-c" nodeIndex="694">#得到滑动窗口的始端索引</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-15" nodeIndex="320"><span class="crayon-r" nodeIndex="695">def</span> <span class="crayon-e" nodeIndex="696">getWinStartIndex</span><span class="crayon-sy" nodeIndex="697">(</span><span class="crayon-r" nodeIndex="698">self</span><span class="crayon-sy" nodeIndex="699">)</span><span class="crayon-o" nodeIndex="700">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-16" nodeIndex="321"><span class="crayon-st" nodeIndex="701">return</span> <span class="crayon-r" nodeIndex="702">self</span><span class="crayon-sy" nodeIndex="703">.</span><span class="crayon-v" nodeIndex="704">windSpiltIndex</span> <span class="crayon-o" nodeIndex="705">-</span> <span class="crayon-r" nodeIndex="706">self</span><span class="crayon-sy" nodeIndex="707">.</span><span class="crayon-v" nodeIndex="708">searchSize</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-17" nodeIndex="322"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-18" nodeIndex="323"><span class="crayon-c" nodeIndex="709">#判断lookHead缓冲区是否为空</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-19" nodeIndex="324"><span class="crayon-r" nodeIndex="710">def</span> <span class="crayon-e" nodeIndex="711">isLookHeadEmpty</span><span class="crayon-sy" nodeIndex="712">(</span><span class="crayon-r" nodeIndex="713">self</span><span class="crayon-sy" nodeIndex="714">)</span><span class="crayon-o" nodeIndex="715">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-20" nodeIndex="325"><span class="crayon-st" nodeIndex="716">return</span> <span class="crayon-t" nodeIndex="717">True</span> <span class="crayon-st" nodeIndex="718">if</span> <span class="crayon-r" nodeIndex="719">self</span><span class="crayon-sy" nodeIndex="720">.</span><span class="crayon-v" nodeIndex="721">windSpiltIndex</span> <span class="crayon-o" nodeIndex="722">+</span> <span class="crayon-r" nodeIndex="723">self</span><span class="crayon-sy" nodeIndex="724">.</span><span class="crayon-v" nodeIndex="725">move</span><span class="crayon-o" nodeIndex="726">></span> <span class="crayon-k" nodeIndex="727">len</span><span class="crayon-sy" nodeIndex="728">(</span><span class="crayon-r" nodeIndex="729">self</span><span class="crayon-sy" nodeIndex="730">.</span><span class="crayon-v" nodeIndex="731">inputStr</span><span class="crayon-sy" nodeIndex="732">)</span> <span class="crayon-o" nodeIndex="733">-</span> <span class="crayon-cn" nodeIndex="734">1</span> <span class="crayon-st" nodeIndex="735">else</span> <span class="crayon-t" nodeIndex="736">False</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-21" nodeIndex="326"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-22" nodeIndex="327"><span class="crayon-r" nodeIndex="737">def</span> <span class="crayon-e" nodeIndex="738">encoding</span><span class="crayon-sy" nodeIndex="739">(</span><span class="crayon-r" nodeIndex="740">self</span><span class="crayon-sy" nodeIndex="741">)</span><span class="crayon-o" nodeIndex="742">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-23" nodeIndex="328"><span class="crayon-v" nodeIndex="743">step</span> <span class="crayon-o" nodeIndex="744">=</span> <span class="crayon-cn" nodeIndex="745">0</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-24" nodeIndex="329"><span class="crayon-k" nodeIndex="746">print</span><span class="crayon-sy" nodeIndex="747">(</span><span class="crayon-s" nodeIndex="748">"Step Position Match Output"</span><span class="crayon-sy" nodeIndex="749">)</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-25" nodeIndex="330"><span class="crayon-st" nodeIndex="750">while</span> <span class="crayon-st" nodeIndex="751">not</span> <span class="crayon-r" nodeIndex="752">self</span><span class="crayon-sy" nodeIndex="753">.</span><span class="crayon-e" nodeIndex="754">isLookHeadEmpty</span><span class="crayon-sy" nodeIndex="755">(</span><span class="crayon-sy" nodeIndex="756">)</span><span class="crayon-o" nodeIndex="757">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-26" nodeIndex="331"><span class="crayon-c" nodeIndex="758">#1.滑动窗口</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-27" nodeIndex="332"><span class="crayon-r" nodeIndex="759">self</span><span class="crayon-sy" nodeIndex="760">.</span><span class="crayon-e" nodeIndex="761">winMove</span><span class="crayon-sy" nodeIndex="762">(</span><span class="crayon-sy" nodeIndex="763">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-28" nodeIndex="333"><span class="crayon-c" nodeIndex="764">#2. 得到最大匹配串的偏移值和长度</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-29" nodeIndex="334"><span class="crayon-sy" nodeIndex="765">(</span><span class="crayon-v" nodeIndex="766">offset</span><span class="crayon-sy" nodeIndex="767">,</span> <span class="crayon-v" nodeIndex="768">matchLen</span><span class="crayon-sy" nodeIndex="769">)</span> <span class="crayon-o" nodeIndex="770">=</span> <span class="crayon-r" nodeIndex="771">self</span><span class="crayon-sy" nodeIndex="772">.</span><span class="crayon-e" nodeIndex="773">findMaxMatch</span><span class="crayon-sy" nodeIndex="774">(</span><span class="crayon-sy" nodeIndex="775">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-30" nodeIndex="335"><span class="crayon-c" nodeIndex="776">#3.设置窗口下一步需要滑动的距离</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-31" nodeIndex="336"><span class="crayon-r" nodeIndex="777">self</span><span class="crayon-sy" nodeIndex="778">.</span><span class="crayon-e" nodeIndex="779">setMoveSteps</span><span class="crayon-sy" nodeIndex="780">(</span><span class="crayon-v" nodeIndex="781">matchLen</span><span class="crayon-sy" nodeIndex="782">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-32" nodeIndex="337"><span class="crayon-st" nodeIndex="783">if</span> <span class="crayon-v" nodeIndex="784">matchLen</span> <span class="crayon-o" nodeIndex="785">==</span> <span class="crayon-cn" nodeIndex="786">0</span><span class="crayon-o" nodeIndex="787">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-33" nodeIndex="338"><span class="crayon-c" nodeIndex="788">#匹配为0，说明无字符串匹配，输出下一个需要编码的字母</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-34" nodeIndex="339"><span class="crayon-v" nodeIndex="789">nextChar</span> <span class="crayon-o" nodeIndex="790">=</span> <span class="crayon-r" nodeIndex="791">self</span><span class="crayon-sy" nodeIndex="792">.</span><span class="crayon-v" nodeIndex="793">inputStr</span><span class="crayon-sy" nodeIndex="794">[</span><span class="crayon-r" nodeIndex="795">self</span><span class="crayon-sy" nodeIndex="796">.</span><span class="crayon-v" nodeIndex="797">windSpiltIndex</span><span class="crayon-sy" nodeIndex="798">]</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-35" nodeIndex="340"><span class="crayon-v" nodeIndex="799">result</span> <span class="crayon-o" nodeIndex="800">=</span> <span class="crayon-sy" nodeIndex="801">(</span><span class="crayon-v" nodeIndex="802">step</span><span class="crayon-sy" nodeIndex="803">,</span> <span class="crayon-r" nodeIndex="804">self</span><span class="crayon-sy" nodeIndex="805">.</span><span class="crayon-v" nodeIndex="806">windSpiltIndex</span><span class="crayon-sy" nodeIndex="807">,</span> <span class="crayon-s" nodeIndex="808">'-'</span><span class="crayon-sy" nodeIndex="809">,</span> <span class="crayon-s" nodeIndex="810">'(0,0)'</span> <span class="crayon-o" nodeIndex="811">+</span> <span class="crayon-v" nodeIndex="812">nextChar</span><span class="crayon-sy" nodeIndex="813">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-36" nodeIndex="341"><span class="crayon-st" nodeIndex="814">else</span><span class="crayon-o" nodeIndex="815">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-37" nodeIndex="342"><span class="crayon-v" nodeIndex="816">result</span> <span class="crayon-o" nodeIndex="817">=</span> <span class="crayon-sy" nodeIndex="818">(</span><span class="crayon-v" nodeIndex="819">step</span><span class="crayon-sy" nodeIndex="820">,</span> <span class="crayon-r" nodeIndex="821">self</span><span class="crayon-sy" nodeIndex="822">.</span><span class="crayon-v" nodeIndex="823">windSpiltIndex</span><span class="crayon-sy" nodeIndex="824">,</span> <span class="crayon-r" nodeIndex="825">self</span><span class="crayon-sy" nodeIndex="826">.</span><span class="crayon-v" nodeIndex="827">inputStr</span><span class="crayon-sy" nodeIndex="828">[</span><span class="crayon-r" nodeIndex="829">self</span><span class="crayon-sy" nodeIndex="830">.</span><span class="crayon-v" nodeIndex="831">windSpiltIndex</span> <span class="crayon-o" nodeIndex="832">-</span> <span class="crayon-v" nodeIndex="833">offset</span><span class="crayon-o" nodeIndex="834">:</span> <span class="crayon-r" nodeIndex="835">self</span><span class="crayon-sy" nodeIndex="836">.</span><span class="crayon-v" nodeIndex="837">windSpiltIndex</span> <span class="crayon-o" nodeIndex="838">-</span> <span class="crayon-v" nodeIndex="839">offset</span> <span class="crayon-o" nodeIndex="840">+</span> <span class="crayon-v" nodeIndex="841">matchLen</span><span class="crayon-sy" nodeIndex="842">]</span><span class="crayon-sy" nodeIndex="843">,</span> <span class="crayon-s" nodeIndex="844">'('</span> <span class="crayon-o" nodeIndex="845">+</span> <span class="crayon-k" nodeIndex="846">str</span><span class="crayon-sy" nodeIndex="847">(</span><span class="crayon-v" nodeIndex="848">offset</span><span class="crayon-sy" nodeIndex="849">)</span> <span class="crayon-o" nodeIndex="850">+</span> <span class="crayon-s" nodeIndex="851">','</span> <span class="crayon-o" nodeIndex="852">+</span> <span class="crayon-k" nodeIndex="853">str</span><span class="crayon-sy" nodeIndex="854">(</span><span class="crayon-v" nodeIndex="855">matchLen</span><span class="crayon-sy" nodeIndex="856">)</span> <span class="crayon-o" nodeIndex="857">+</span> <span class="crayon-s" nodeIndex="858">')'</span><span class="crayon-sy" nodeIndex="859">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-38" nodeIndex="343"><span class="crayon-c" nodeIndex="860">#4.输出结果</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-39" nodeIndex="344"><span class="crayon-r" nodeIndex="861">self</span><span class="crayon-sy" nodeIndex="862">.</span><span class="crayon-e" nodeIndex="863">output</span><span class="crayon-sy" nodeIndex="864">(</span><span class="crayon-v" nodeIndex="865">result</span><span class="crayon-sy" nodeIndex="866">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-40" nodeIndex="345"><span class="crayon-v" nodeIndex="867">step</span> <span class="crayon-o" nodeIndex="868">=</span> <span class="crayon-v" nodeIndex="869">step</span> <span class="crayon-o" nodeIndex="870">+</span> <span class="crayon-cn" nodeIndex="871">1</span> <span class="crayon-c" nodeIndex="872">#仅用来设置第几步</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-41" nodeIndex="346"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-42" nodeIndex="347"></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-43" nodeIndex="348"><span class="crayon-c" nodeIndex="873">#滑动窗口(移动分界点)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-44" nodeIndex="349"><span class="crayon-r" nodeIndex="874">def</span> <span class="crayon-e" nodeIndex="875">winMove</span><span class="crayon-sy" nodeIndex="876">(</span><span class="crayon-r" nodeIndex="877">self</span><span class="crayon-sy" nodeIndex="878">)</span><span class="crayon-o" nodeIndex="879">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-45" nodeIndex="350"><span class="crayon-r" nodeIndex="880">self</span><span class="crayon-sy" nodeIndex="881">.</span><span class="crayon-v" nodeIndex="882">windSpiltIndex</span> <span class="crayon-o" nodeIndex="883">=</span> <span class="crayon-r" nodeIndex="884">self</span><span class="crayon-sy" nodeIndex="885">.</span><span class="crayon-v" nodeIndex="886">windSpiltIndex</span> <span class="crayon-o" nodeIndex="887">+</span> <span class="crayon-r" nodeIndex="888">self</span><span class="crayon-sy" nodeIndex="889">.</span><span class="crayon-v" nodeIndex="890">move</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-46" nodeIndex="351"></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-47" nodeIndex="352"><span class="crayon-c" nodeIndex="891">#寻找最大匹配字符并返回相对于窗口分界点的偏移值和匹配长度</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-48" nodeIndex="353"><span class="crayon-r" nodeIndex="892">def</span> <span class="crayon-e" nodeIndex="893">findMaxMatch</span><span class="crayon-sy" nodeIndex="894">(</span><span class="crayon-r" nodeIndex="895">self</span><span class="crayon-sy" nodeIndex="896">)</span><span class="crayon-o" nodeIndex="897">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-49" nodeIndex="354"><span class="crayon-v" nodeIndex="898">matchLen</span> <span class="crayon-o" nodeIndex="899">=</span> <span class="crayon-cn" nodeIndex="900">0</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-50" nodeIndex="355"><span class="crayon-v" nodeIndex="901">offset</span> <span class="crayon-o" nodeIndex="902">=</span> <span class="crayon-cn" nodeIndex="903">0</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-51" nodeIndex="356"><span class="crayon-v" nodeIndex="904">minEdge</span> <span class="crayon-o" nodeIndex="905">=</span> <span class="crayon-r" nodeIndex="906">self</span><span class="crayon-sy" nodeIndex="907">.</span><span class="crayon-e" nodeIndex="908">minEdge</span><span class="crayon-sy" nodeIndex="909">(</span><span class="crayon-sy" nodeIndex="910">)</span> <span class="crayon-o" nodeIndex="911">+</span> <span class="crayon-cn" nodeIndex="912">1</span> <span class="crayon-c" nodeIndex="913">#得到编码区域的右边界</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-52" nodeIndex="357"><span class="crayon-c" nodeIndex="914">#遍历待编码区，寻找最大匹配串</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-53" nodeIndex="358"><span class="crayon-st" nodeIndex="915">for</span>  <span class="crayon-st" nodeIndex="917">in</span> <span class="crayon-k" nodeIndex="918">irange</span><span class="crayon-sy" nodeIndex="919">(</span><span class="crayon-r" nodeIndex="920">self</span><span class="crayon-sy" nodeIndex="921">.</span><span class="crayon-v" nodeIndex="922">windSpiltIndex</span> <span class="crayon-o" nodeIndex="923">+</span> <span class="crayon-cn" nodeIndex="924">1</span><span class="crayon-sy" nodeIndex="925">,</span> <span class="crayon-v" nodeIndex="926">minEdge</span><span class="crayon-sy" nodeIndex="927">)</span><span class="crayon-o" nodeIndex="928">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-54" nodeIndex="359"><span class="crayon-c" nodeIndex="929">#print("i: %d" %i)</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-55" nodeIndex="360"><span class="crayon-v" nodeIndex="930">offsetTemp</span> <span class="crayon-o" nodeIndex="931">=</span> <span class="crayon-r" nodeIndex="932">self</span><span class="crayon-sy" nodeIndex="933">.</span><span class="crayon-e" nodeIndex="934">searchBufferOffest</span><span class="crayon-sy" nodeIndex="935">(</span><span class="crayon-sy" nodeIndex="937">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-56" nodeIndex="361"><span class="crayon-st" nodeIndex="938">if</span> <span class="crayon-v" nodeIndex="939">ioffsetTemp</span> <span class="crayon-o" nodeIndex="940">==</span> <span class="crayon-r" nodeIndex="941">self</span><span class="crayon-sy" nodeIndex="942">.</span><span class="crayon-v" nodeIndex="943">notFind</span><span class="crayon-o" nodeIndex="944">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-57" nodeIndex="362"><span class="crayon-st" nodeIndex="945">return</span> <span class="crayon-sy" nodeIndex="946">(</span><span class="crayon-v" nodeIndex="947">offset</span><span class="crayon-sy" nodeIndex="948">,</span> <span class="crayon-v" nodeIndex="949">matchLen</span><span class="crayon-sy" nodeIndex="950">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-58" nodeIndex="363"><span class="crayon-v" nodeIndex="951">offset</span> <span class="crayon-o" nodeIndex="952">=</span> <span class="crayon-v" nodeIndex="953">offsetTemp</span> <span class="crayon-c" nodeIndex="954">#偏移值</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-59" nodeIndex="364"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-60" nodeIndex="365"><span class="crayon-v" nodeIndex="955">matchLen</span> <span class="crayon-o" nodeIndex="956">=</span> <span class="crayon-v" nodeIndex="957">matchLen</span> <span class="crayon-o" nodeIndex="958">+</span> <span class="crayon-cn" nodeIndex="959">1</span> <span class="crayon-c" nodeIndex="960">#每找到一个匹配串，加1</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-61" nodeIndex="366"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-62" nodeIndex="367"><span class="crayon-st" nodeIndex="961">return</span> <span class="crayon-sy" nodeIndex="962">(</span><span class="crayon-v" nodeIndex="963">offset</span><span class="crayon-sy" nodeIndex="964">,</span> <span class="crayon-v" nodeIndex="965">matchLen</span><span class="crayon-sy" nodeIndex="966">)</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-63" nodeIndex="368"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-64" nodeIndex="369"><span class="crayon-c" nodeIndex="967">#入参字符串是否存在于搜索缓冲区，如果存在，返回匹配字符串的起始索引</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-65" nodeIndex="370"><span class="crayon-r" nodeIndex="968">def</span> <span class="crayon-e" nodeIndex="969">searchBufferOffest</span><span class="crayon-sy" nodeIndex="970">(</span><span class="crayon-r" nodeIndex="971">self</span><span class="crayon-sy" nodeIndex="972">,</span> <span class="crayon-sy" nodeIndex="974">)</span><span class="crayon-o" nodeIndex="975">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-66" nodeIndex="371"><span class="crayon-v" nodeIndex="976">isearchStart</span> <span class="crayon-o" nodeIndex="977">=</span> <span class="crayon-r" nodeIndex="978">self</span><span class="crayon-sy" nodeIndex="979">.</span><span class="crayon-e" nodeIndex="980">getWinStartIndex</span><span class="crayon-sy" nodeIndex="981">(</span><span class="crayon-sy" nodeIndex="982">)</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-67" nodeIndex="372"><span class="crayon-v" nodeIndex="983">searchEnd</span> <span class="crayon-o" nodeIndex="984">=</span> <span class="crayon-r" nodeIndex="985">self</span><span class="crayon-sy" nodeIndex="986">.</span><span class="crayon-v" nodeIndex="987">windSpiltIndex</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-68" nodeIndex="373"><span class="crayon-c" nodeIndex="988">#下面几个if是处理开始时的特殊情况</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-69" nodeIndex="374"><span class="crayon-st" nodeIndex="989">if</span> <span class="crayon-v" nodeIndex="990">searchEnd</span> <span class="crayon-o" nodeIndex="991"><</span> <span class="crayon-cn" nodeIndex="992">1</span><span class="crayon-o" nodeIndex="993">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-70" nodeIndex="375"><span class="crayon-st" nodeIndex="994">return</span> <span class="crayon-r" nodeIndex="995">self</span><span class="crayon-sy" nodeIndex="996">.</span><span class="crayon-e" nodeIndex="997">notFind</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-71" nodeIndex="376"><span class="crayon-st" nodeIndex="998">if</span> <span class="crayon-v" nodeIndex="999">searchStart</span> <span class="crayon-o" nodeIndex="1000"><</span> <span class="crayon-cn" nodeIndex="1001">0</span><span class="crayon-o" nodeIndex="1002">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-72" nodeIndex="377"><span class="crayon-v" nodeIndex="1003">searchStart</span> <span class="crayon-o" nodeIndex="1004">=</span> <span class="crayon-cn" nodeIndex="1005">0</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-73" nodeIndex="378"><span class="crayon-st" nodeIndex="1006">if</span> <span class="crayon-v" nodeIndex="1007">searchEnd</span> <span class="crayon-o" nodeIndex="1008">==</span> <span class="crayon-cn" nodeIndex="1009">0</span><span class="crayon-o" nodeIndex="1010">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-74" nodeIndex="379"><span class="crayon-v" nodeIndex="1011">searchEnd</span> <span class="crayon-o" nodeIndex="1012">=</span> <span class="crayon-cn" nodeIndex="1013">1</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-75" nodeIndex="380"><span class="crayon-v" nodeIndex="1014">searchStr</span> <span class="crayon-o" nodeIndex="1015">=</span> <span class="crayon-r" nodeIndex="1016">self</span><span class="crayon-sy" nodeIndex="1017">.</span><span class="crayon-v" nodeIndex="1018">inputStr</span><span class="crayon-sy" nodeIndex="1019">[</span><span class="crayon-v" nodeIndex="1020">searchStart</span> <span class="crayon-o" nodeIndex="1021">:</span> <span class="crayon-v" nodeIndex="1022">searchEnd</span><span class="crayon-sy" nodeIndex="1023">]</span> <span class="crayon-c" nodeIndex="1024">#搜索区字符串</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-76" nodeIndex="381"><span class="crayon-v" nodeIndex="1025">findIndex</span> <span class="crayon-o" nodeIndex="1026">=</span> <span class="crayon-v" nodeIndex="1027">searchStr</span><span class="crayon-sy" nodeIndex="1028">.</span><span class="crayon-e" nodeIndex="1029">find</span><span class="crayon-sy" nodeIndex="1030">(</span><span class="crayon-r" nodeIndex="1031">self</span><span class="crayon-sy" nodeIndex="1032">.</span><span class="crayon-v" nodeIndex="1033">inputStr</span><span class="crayon-sy" nodeIndex="1034">[</span><span class="crayon-r" nodeIndex="1035">self</span><span class="crayon-sy" nodeIndex="1036">.</span><span class="crayon-v" nodeIndex="1037">windSpiltIndex</span> <span class="crayon-o" nodeIndex="1038">:</span> <span class="crayon-sy" nodeIndex="1040">]</span><span class="crayon-sy" nodeIndex="1041">)</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-77" nodeIndex="382"><span class="crayon-st" nodeIndex="1042">if</span> <span class="crayon-v" nodeIndex="1043">ifindIndex</span> <span class="crayon-o" nodeIndex="1044">==</span> <span class="crayon-o" nodeIndex="1045">-</span><span class="crayon-cn" nodeIndex="1046">1</span><span class="crayon-o" nodeIndex="1047">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-78" nodeIndex="383"><span class="crayon-st" nodeIndex="1048">return</span> <span class="crayon-o" nodeIndex="1049">-</span><span class="crayon-cn" nodeIndex="1050">1</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-79" nodeIndex="384"><span class="crayon-st" nodeIndex="1051">return</span> <span class="crayon-k" nodeIndex="1052">len</span><span class="crayon-sy" nodeIndex="1053">(</span><span class="crayon-v" nodeIndex="1054">searchStr</span><span class="crayon-sy" nodeIndex="1055">)</span> <span class="crayon-o" nodeIndex="1056">-</span> <span class="crayon-v" nodeIndex="1057">findIndex</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-80" nodeIndex="385"></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-81" nodeIndex="386"><span class="crayon-c" nodeIndex="1058">#设置下一次窗口需要滑动的步数</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-82" nodeIndex="387"><span class="crayon-r" nodeIndex="1059">def</span> <span class="crayon-e" nodeIndex="1060">setMoveSteps</span><span class="crayon-sy" nodeIndex="1061">(</span><span class="crayon-r" nodeIndex="1062">self</span><span class="crayon-sy" nodeIndex="1063">,</span> <span class="crayon-v" nodeIndex="1064">matchLen</span><span class="crayon-sy" nodeIndex="1065">)</span><span class="crayon-o" nodeIndex="1066">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-83" nodeIndex="388"><span class="crayon-st" nodeIndex="1067">if</span> <span class="crayon-v" nodeIndex="1068">matchLen</span> <span class="crayon-o" nodeIndex="1069">==</span> <span class="crayon-cn" nodeIndex="1070">0</span><span class="crayon-o" nodeIndex="1071">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-84" nodeIndex="389"><span class="crayon-r" nodeIndex="1072">self</span><span class="crayon-sy" nodeIndex="1073">.</span><span class="crayon-v" nodeIndex="1074">move</span> <span class="crayon-o" nodeIndex="1075">=</span> <span class="crayon-cn" nodeIndex="1076">1</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-85" nodeIndex="390"><span class="crayon-st" nodeIndex="1077">else</span><span class="crayon-o" nodeIndex="1078">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-86" nodeIndex="391"><span class="crayon-r" nodeIndex="1079">self</span><span class="crayon-sy" nodeIndex="1080">.</span><span class="crayon-v" nodeIndex="1081">move</span> <span class="crayon-o" nodeIndex="1082">=</span> <span class="crayon-e" nodeIndex="1083">matchLen</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-87" nodeIndex="392"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-88" nodeIndex="393"></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-89" nodeIndex="394"><span class="crayon-r" nodeIndex="1084">def</span> <span class="crayon-e" nodeIndex="1085">minEdge</span><span class="crayon-sy" nodeIndex="1086">(</span><span class="crayon-r" nodeIndex="1087">self</span><span class="crayon-sy" nodeIndex="1088">)</span><span class="crayon-o" nodeIndex="1089">:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-90" nodeIndex="395"><span class="crayon-st" nodeIndex="1090">return</span> <span class="crayon-k" nodeIndex="1091">len</span><span class="crayon-sy" nodeIndex="1092">(</span><span class="crayon-r" nodeIndex="1093">self</span><span class="crayon-sy" nodeIndex="1094">.</span><span class="crayon-v" nodeIndex="1095">inputStr</span><span class="crayon-sy" nodeIndex="1096">)</span> <span class="crayon-st" nodeIndex="1097">if</span> <span class="crayon-k" nodeIndex="1098">len</span><span class="crayon-sy" nodeIndex="1099">(</span><span class="crayon-r" nodeIndex="1100">self</span><span class="crayon-sy" nodeIndex="1101">.</span><span class="crayon-v" nodeIndex="1102">inputStr</span><span class="crayon-sy" nodeIndex="1103">)</span> <span class="crayon-o" nodeIndex="1104">-</span> <span class="crayon-cn" nodeIndex="1105">1</span> <span class="crayon-o" nodeIndex="1106"><</span> <span class="crayon-r" nodeIndex="1107">self</span><span class="crayon-sy" nodeIndex="1108">.</span><span class="crayon-e" nodeIndex="1109">getWinEndIndex</span><span class="crayon-sy" nodeIndex="1110">(</span><span class="crayon-sy" nodeIndex="1111">)</span> <span class="crayon-st" nodeIndex="1112">else</span> <span class="crayon-r" nodeIndex="1113">self</span><span class="crayon-sy" nodeIndex="1114">.</span><span class="crayon-e" nodeIndex="1115">getWinEndIndex</span><span class="crayon-sy" nodeIndex="1116">(</span><span class="crayon-sy" nodeIndex="1117">)</span> <span class="crayon-o" nodeIndex="1118">+</span> <span class="crayon-cn" nodeIndex="1119">1</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-91" nodeIndex="396"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-92" nodeIndex="397"><span class="crayon-r" nodeIndex="1120">def</span> <span class="crayon-e" nodeIndex="1121">output</span><span class="crayon-sy" nodeIndex="1122">(</span><span class="crayon-r" nodeIndex="1123">self</span><span class="crayon-sy" nodeIndex="1124">,</span> <span class="crayon-v" nodeIndex="1125">touple</span><span class="crayon-sy" nodeIndex="1126">)</span><span class="crayon-o" nodeIndex="1127">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-93" nodeIndex="398"><span class="crayon-k" nodeIndex="1128">print</span><span class="crayon-sy" nodeIndex="1129">(</span><span class="crayon-s" nodeIndex="1130">"%d %d %s %s"</span> <span class="crayon-o" nodeIndex="1131">%</span> <span class="crayon-v" nodeIndex="1132">touple</span><span class="crayon-sy" nodeIndex="1133">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-94" nodeIndex="399"></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-95" nodeIndex="400"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-96" nodeIndex="401"></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-97" nodeIndex="402"></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-98" nodeIndex="403"><span class="crayon-st" nodeIndex="1134">if</span> <span class="crayon-v" nodeIndex="1135">__name__</span> <span class="crayon-o" nodeIndex="1136">==</span> <span class="crayon-s" nodeIndex="1137">"__main__"</span><span class="crayon-o" nodeIndex="1138">:</span></div>
<div class="crayon-line" id="crayon-58b04543bd3f1238265784-99" nodeIndex="404"><span class="crayon-v" nodeIndex="1139">lz77</span> <span class="crayon-o" nodeIndex="1140">=</span> <span class="crayon-e" nodeIndex="1141">Lz77</span><span class="crayon-sy" nodeIndex="1142">(</span><span class="crayon-s" nodeIndex="1143">"AABCBBABC"</span><span class="crayon-sy" nodeIndex="1144">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-58b04543bd3f1238265784-100" nodeIndex="405"><span class="crayon-v" nodeIndex="1145">lz77</span><span class="crayon-sy" nodeIndex="1146">.</span><span class="crayon-e" nodeIndex="1147">encoding</span><span class="crayon-sy" nodeIndex="1148">(</span><span class="crayon-sy" nodeIndex="1149">)</span></div>
</div>
</td>
</tr></table></div>
</div>
</div>
<p nodeIndex="406">只是简单的写了下，没有过多考虑细节，请注意，这不是最终的代码，只是用来阐述原理，仅供参考。输出结果就是上面的输出（格式由于坑爹的博客园固定样式，代码位置有偏移，请注意）</p>
<p nodeIndex="407"><strong nodeIndex="1150">参考文章：</strong></p>
<p nodeIndex="408" childisonlyalink="1"><a href="http://msdn.microsoft.com/en-us/library/ee916854.aspx" target="_blank" nodeIndex="1151">http://msdn.microsoft.com/en-us/library/ee916854.aspx</a></p>
<p nodeIndex="409" childisonlyalink="1"><a href="http://en.wikipedia.org/wiki/LZ77_and_LZ78" target="_blank" nodeIndex="1152">http://en.wikipedia.org/wiki/LZ77_and_LZ78</a></p>
<p nodeIndex="410" childisonlyalink="1"><a href="http://cs.stanford.edu/people/eroberts/courses/soco/projects/2000-01/data-compression/lossless/lz77/algorithm.htm" target="_blank" nodeIndex="1153">http://cs.stanford.edu/people/eroberts/courses/soco/projects/2000-01/data-compression/lossless/lz77/algorithm.htm</a></p>
<p nodeIndex="411">以上几篇文章都是很好的讲解LZ77原理的，大家有兴趣的可以参考下。由于国内介绍该算法的比较少，故这些英文文章帮助还是挺大的。</p>
</div>