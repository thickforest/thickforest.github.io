---
layout: post
title: 使用 pass 密码管理器管理你的密码 | Linux 中国
categories:
- Pocket
tags:
---
原文地址：http://mp.weixin.qq.com/s/xO7YIRiWLcjTxDOrRTKveA

收藏时间：2018-03-07 14:11:22

<div  lang="zh"><div id="img-content" nodeIndex="5"><p class="profile_meta _RIL_KEEPER_CLASS_" nodeIndex="10">
                            <label class="profile_meta_label">微信号</label>
                            <span class="profile_meta_value">linux-cn</span>
                            </p><p class="profile_meta _RIL_KEEPER_CLASS_" nodeIndex="11">
                            <label class="profile_meta_label">功能介绍</label>
                            <span class="profile_meta_value">十万级技术订阅号，依托于『Linux中国』（https://linux.cn/）社区，专注于 Linux 学习、技术研究、开源思想传播。</span>
                            </p><div class="rich_media_content " id="js_content" nodeIndex="12"><div id="RIL_IMG_1" class="RIL_IMG"><img src="/media/posts_images/2018-03-07-2103291850/1"/></div><p class=" _RIL_KEEPER_CLASS_" nodeIndex="13"></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="14"></p><section nodeIndex="16"><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="15">目标</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="17">学习在 Linux 上使用 pass 密码管理器来管理你的密码</p><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="18">条件</p><section class="ul" nodeIndex="169"><section class="ulli" nodeIndex="170">◈ 需要 root 权限来安装需要的包</section></section><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="19">难度</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="20">简单</p><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="21">约定</p><section class="ul" nodeIndex="152"><section class="ulli" nodeIndex="171">◈ <code nodeIndex="172">#</code> - 执行指定命令需要 root 权限，可以是直接使用 root 用户来执行或者使用 <code nodeIndex="173">sudo</code>命令来执行</section><section class="ulli" nodeIndex="174">◈ <code nodeIndex="175">$</code> - 使用普通的非特权用户执行指定命令</section></section><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="22">介绍</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="23">如果你有根据不同的意图设置不同密码的好习惯，你可能已经感受到需要一个密码管理器的必要性了。在 Linux 上有很多选择，可以是专有软件（如果你敢用的话）也可以是开源软件。如果你跟我一样喜欢简洁的话，你可能会对 <code nodeIndex="176">pass</code> 感兴趣。</p><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="24">第一步</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="25">pass 作为一个密码管理器，其实际上是一些你可能早已每天使用的、可信赖且实用的工具的一种封装，比如 <code nodeIndex="177">gpg</code> 和 <code nodeIndex="178">git</code> 。虽然它也有图形界面，但它专门设计能成在命令行下工作的：因此它也可以在 headless 机器上工作（LCTT 译注：根据 wikipedia 的说法，所谓 headless 是指没有显示器、键盘和鼠标的机器，一般通过网络链接来控制）。</p><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="26">安装</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="27">pass 在主流的 Linux 发行版中都是可用的，你可以通过包管理器安装：</p><p class="h4 _RIL_KEEPER_CLASS_" nodeIndex="28">Fedora</p><pre class="prettyprint linenums prettyprinted" nodeIndex="29"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="31"><li nodeIndex="30"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="32"><code><span class="com">#</span><span class="pln"> dnf install </span><span class="kwd">pass</span></code></p></li></ol></pre><p class="h4 _RIL_KEEPER_CLASS_" nodeIndex="33">RHEL 和 CentOS</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="34">pass 不在官方仓库中，但你可以从 <code nodeIndex="179">epel</code> 中获取道它。要在 CentOS7 上启用后面这个源，只需要执行：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="35"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="37"><li nodeIndex="36"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="38"><code><span class="com">#</span><span class="pln"> </span><span class="kwd">yum</span><span class="pln"> install epel</span><span class="pun">-</span><span class="pln">release</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="39">然而在 Red Hat 企业版的 Linux 上，这个额外的源是不可用的；你需要从 EPEL 官方网站上下载它。</p><p class="h4 _RIL_KEEPER_CLASS_" nodeIndex="40">Debian 和 Ubuntu</p><pre class="prettyprint linenums prettyprinted" nodeIndex="41"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="43"><li nodeIndex="42"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="44"><code><span class="com">#</span><span class="pln"> </span><span class="kwd">apt-get</span><span class="pln"> install </span><span class="kwd">pass</span></code></p></li></ol></pre><p class="h4 _RIL_KEEPER_CLASS_" nodeIndex="45">Arch Linux</p><pre class="prettyprint linenums prettyprinted" nodeIndex="46"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="48"><li nodeIndex="47"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="49"><code><span class="com">#</span><span class="pln"> pacman </span><span class="pun">-</span><span class="kwd">Spass</span></code></p></li></ol></pre><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="50">初始化密码仓库</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="51">安装好 <code nodeIndex="180">pass</code> 后，就可以开始使用和配置它了。首先，由于 <code nodeIndex="181">pass</code> 依赖于 <code nodeIndex="182">gpg</code> 来对我们的密码进行加密并以安全的方式进行存储，我们必须准备好一个 gpg 密钥对。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="52">首先我们要初始化密码仓库：这就是一个用来存放 gpg 加密后的密码的目录。默认情况下它会在你的 <code nodeIndex="183">$HOME</code> 创建一个隐藏目录，不过你也可以通过使用 <code nodeIndex="184">PASSWORD_STORE_DIR</code> 这一环境变量来指定另一个路径。让我们运行：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="53"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="55"><li nodeIndex="54"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="56"><code><span class="pln">$ </span><span class="kwd">pass</span><span class="pln"> </span><span class="kwd">init</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="57">然后 <code nodeIndex="185">password-store</code> 目录就创建好了。现在，让我们来存储我们第一个密码：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="58"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="60"><li nodeIndex="59"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="61"><code><span class="pln">$ </span><span class="kwd">pass</span><span class="pln"> edit mysite</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="62">这会打开默认文本编辑器，我么只需要输入密码就可以了。输入的内容会用 gpg 加密并存储为密码仓库目录中的 <code nodeIndex="186">mysite.gpg</code> 文件。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="63"><code nodeIndex="187">pass</code> 以目录树的形式存储加密后的文件，也就是说我们可以在逻辑上将多个文件放在子目录中以实现更好的组织形式，我们只需要在创建文件时指定存在哪个目录下就行了，像这样：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="64"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="66"><li nodeIndex="65"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="67"><code><span class="pln">$ </span><span class="kwd">pass</span><span class="pln"> edit foo</span><span class="pun">/</span><span class="pln">bar</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="68">跟上面的命令一样，它也会让你输入密码，但是创建的文件是放在密码仓库目录下的 <code nodeIndex="188">foo</code> 子目录中的。要查看文件组织结构，只需要不带任何参数运行 <code nodeIndex="189">pass</code> 命令即可：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="69"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="71"><li nodeIndex="70"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="72"><code><span class="pln">$ </span><span class="kwd">pass</span></code></p></li><li nodeIndex="73"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="74"><code><span class="typ">Password</span><span class="pln"> </span><span class="typ">Store</span></code></p></li><li nodeIndex="75"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="76"><code><span class="pun">├──</span><span class="pln"> foo</span></code></p></li><li nodeIndex="77"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="78"><code><span class="pun">│</span><span class="pln">   </span><span class="pun">└──</span><span class="pln"> bar</span></code></p></li><li nodeIndex="79"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="80"><code><span class="pun">└──</span><span class="pln"> mysite</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="81">若想修改密码，只需要重复创建密码的操作就行了。</p><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="82">获取密码</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="83">有两种方法可以获取密码：第一种会显示密码到终端上，方法是运行：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="84"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="86"><li nodeIndex="85"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="87"><code><span class="kwd">pass</span><span class="pln"> mysite</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="88">然而更好的方法是使用 <code nodeIndex="190">-c</code> 选项让 <code nodeIndex="191">pass</code> 将密码直接拷贝到剪切板上：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="89"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="91"><li nodeIndex="90"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="92"><code><span class="kwd">pass</span><span class="pln"> </span><span class="pun">-</span><span class="pln">c mysite</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="93">这种情况下剪切板中的内容会在 <code nodeIndex="192">45</code> 秒后自动清除。两种方法都会要求你输入 gpg 密码。</p><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="94">生成密码</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="95"><code nodeIndex="193">pass</code> 也可以为我们自动生成（并自动存储）安全密码。假设我们想要生成一个由 15 个字符组成的密码：包含字母，数字和特殊符号，其命令如下：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="96"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="98"><li nodeIndex="97"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="99"><code><span class="kwd">pass</span><span class="pln"> generate mysite </span><span class="lit">15</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="100">若希望密码只包含字母和数字则可以是使用 <code nodeIndex="194">--no-symbols</code> 选项。生成的密码会显示在屏幕上。也可以通过 <code nodeIndex="195">--clip</code> 或 <code nodeIndex="196">-c</code> 选项让 <code nodeIndex="197">pass</code> 把密码直接拷贝到剪切板中。通过使用 <code nodeIndex="198">-q</code> 或 <code nodeIndex="199">--qrcode</code> 选项来生成二维码：</p><p class="article_img _RIL_KEEPER_CLASS_" nodeIndex="101"><div id="RIL_IMG_2" class="RIL_IMG"><img src="/media/posts_images/2018-03-07-2103291850/2"/></div></p><p class="article_img_desc _RIL_KEEPER_CLASS_" nodeIndex="102"><em nodeIndex="200">qrcode</em></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="103">从上面的截屏中可看出，生成了一个二维码，不过由于运行该命令时 <code nodeIndex="201">mysite</code> 的密码已经存在了，<code nodeIndex="202">pass</code> 会提示我们确认是否要覆盖原密码。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="104"><code nodeIndex="203">pass</code> 使用 <code nodeIndex="204">/dev/urandom</code> 设备作为（伪）随机数据生成器来生成密码，同时它使用 <code nodeIndex="205">xclip</code> 工具来将密码拷贝到粘帖板中，而使用 <code nodeIndex="206">qrencode</code> 来将密码以二维码的形式显示出来。在我看来，这种模块化的设计正是它最大的优势：它并不重复造轮子，而只是将常用的工具包装起来完成任务。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="105">你也可以使用 <code nodeIndex="207">pass mv</code>、<code nodeIndex="208">pass cp</code> 和 <code nodeIndex="209">pass rm</code> 来重命名、拷贝和删除密码仓库中的文件。</p><p class="h3 _RIL_KEEPER_CLASS_" nodeIndex="106">将密码仓库变成 git 仓库</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="107"><code nodeIndex="210">pass</code> 另一个很棒的功能就是可以将密码仓库当成 git 仓库来用：通过版本管理系统能让我们管理密码更方便。</p><pre class="prettyprint linenums prettyprinted" nodeIndex="108"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="110"><li nodeIndex="109"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="111"><code><span class="kwd">pass</span><span class="pln"> </span><span class="kwd">git</span><span class="pln"> </span><span class="kwd">init</span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="112">这会创建 git 仓库，并自动提交所有已存在的文件。下一步就是指定跟踪的远程仓库了：</p><pre class="prettyprint linenums prettyprinted" nodeIndex="113"><ol class="linenums list-paddingleft-2 _RIL_KEEPER_CLASS_" nodeIndex="115"><li nodeIndex="114"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="116"><code><span class="kwd">pass</span><span class="pln"> </span><span class="kwd">git</span><span class="pln"> remote add </span><span class="pun"><</span><span class="pln">name</span><span class="pun">></span><span class="pln"> </span><span class="pun"><</span><span class="pln">url</span><span class="pun">></span></code></p></li></ol></pre><p class=" _RIL_KEEPER_CLASS_" nodeIndex="117">我们可以把这个密码仓库当成普通仓库来用。唯一的不同点在于每次我们新增或修改一个密码，<code nodeIndex="211">pass</code> 都会自动将该文件加入索引并创建一个提交。</p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="118"><code nodeIndex="212">pass</code> 有一个叫做 <code nodeIndex="213">qtpass</code> 的图形界面，而且也支持 Windows 和 MacOs。通过使用 <code nodeIndex="214">PassFF</code> 插件，它还能获取 firefox 中存储的密码。在它的项目网站上可以查看更多详细信息。试一下 <code nodeIndex="215">pass</code> 吧，你不会失望的！</p><hr nodeIndex="216"><p class=" _RIL_KEEPER_CLASS_" nodeIndex="119">via: <span nodeIndex="217">https://linuxconfig.org/how-to-organize-your-passwords-using-pass-password-manager</span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="120">作者：<span nodeIndex="218">Egidio Docile</span><span class="sup" nodeIndex="219">[2]</span> 译者：<span nodeIndex="220">lujun9972</span> 校对：<span nodeIndex="221">Locez</span></p><p class=" _RIL_KEEPER_CLASS_" nodeIndex="121">本文由 <span nodeIndex="222">LCTT</span> 原创编译，<span nodeIndex="223">Linux中国</span> 荣誉推出</p></section><p class=" _RIL_KEEPER_CLASS_" nodeIndex="122"><br nodeIndex="224"></p>
                </div>
                <div class="ct_mpda_wrp" id="js_sponsor_ad_area" nodeIndex="123"></div>

                
                                <p class=" _RIL_KEEPER_CLASS_" nodeIndex="127">
                        
                        <a class="reward_access" id="js_reward_link" href=""><span class="icon-reward"></span><span id="js_reward_link_text">赞赏</span></a>
                        
                    </p><p class="tips_global reward_user_tips _RIL_KEEPER_CLASS_" nodeIndex="129"><a href="" id="js_reward_total"></a>人赞赏</p><div id="RIL_IMG_3" class="RIL_IMG"><img src="/media/posts_images/2018-03-07-2103291850/3"/></div>
                                <p class="tips_global _RIL_KEEPER_CLASS_" nodeIndex="132">长按二维码向我转账</p><p class="reward_tips _RIL_KEEPER_CLASS_" nodeIndex="133"></p><p class="tips_global _RIL_KEEPER_CLASS_" nodeIndex="134">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                                            </div>
                        
                        


                    </div>